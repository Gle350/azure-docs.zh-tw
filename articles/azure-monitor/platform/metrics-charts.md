---
title: Azure 計量瀏覽器的進階功能
description: 瞭解 Azure 監視器計量瀏覽器的 advanced 功能
author: vgorbenko
services: azure-monitor
ms.topic: conceptual
ms.date: 01/22/2019
ms.author: vitalyg
ms.subservice: metrics
ms.openlocfilehash: be3d3f11e90c17bd8c4792418500da651039e480
ms.sourcegitcommit: 77ab078e255034bd1a8db499eec6fe9b093a8e4f
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/16/2020
ms.locfileid: "97562798"
---
# <a name="advanced-features-of-azure-metrics-explorer"></a>Azure 計量瀏覽器的進階功能

> [!NOTE]
> 本文假設您已熟悉計量瀏覽器的基本功能。 如果您是新使用者，而且想要瞭解如何建立您的第一個度量圖表，請參閱 [開始使用 Azure 計量瀏覽器](metrics-getting-started.md)。

## <a name="metrics-in-azure"></a>Azure 中的計量

[Azure 監視器](data-platform-metrics.md)中的計量是隨時間收集並儲存的一系列度量與計數值。 計量包括標準 (或稱為「平台」) 計量與自訂計量。 標準計量是由 Azure 平台本身提供給您使用。 標準計量反映您 Azure 資源的健康情況與使用情形統計資料。 自訂計量會由您的應用程式使用 [APPLICATION INSIGHTS API，針對自訂事件和計量](../app/api-custom-events-metrics.md)、  [WINDOWS Azure 診斷 (WAD) 延伸](./diagnostics-extension-overview.md)模組或 [Azure 監視器 REST API](./metrics-store-custom-rest-api.md)，傳送至 Azure。

## <a name="create-views-with-multiple-metrics-and-charts"></a>建立具有多個計量和圖表的視圖

您可以建立繪製多個計量線的圖表，或一次顯示多個度量圖表。 此功能可讓您：

- 將相同圖形上的相關計量相互關聯，以查看一個值與另一個值的關聯性
- 以接近相近的不同測量單位顯示度量
- 以視覺化方式匯總和比較多個資源的計量

例如，如果您有5個儲存體帳戶，而您想要知道兩者之間的總空間耗用量，您可以建立 (堆疊) 區域圖，以顯示特定時間點的個人和所有值的總和。

### <a name="multiple-metrics-on-the-same-chart"></a>相同圖表上的多個計量

首先， [建立新的圖表](metrics-getting-started.md#create-your-first-metric-chart)。 按一下 [ **新增度量** ] 並重複步驟，在相同的圖表上新增另一個度量。

   > [!NOTE]
   > 您一般不會想要有具有不同計量單位的計量 (例如「毫秒」與 “KB”) 或其刻度在單一圖表上會呈現大幅差異的計量。 如果是這樣，您應該考慮使用多個圖表。 按一下 [新增圖表] 按鈕以在計量瀏覽器中建立多個圖表。

### <a name="multiple-charts"></a>多個圖表

按一下 [ **新增圖表** ]，並使用不同的度量建立另一個圖表。

### <a name="order-or-delete-multiple-charts"></a>排序或刪除多個圖表

若要排序或刪除多個圖表，請按一下省略號 ( **...** ) 符號開啟 [圖表] 功能表，然後選擇 [ **上移**]、[ **下移**] 或 [ **刪除**] 的適當功能表項目。

## <a name="changing-aggregation"></a>變更匯總

當您將計量新增至圖表時，計量瀏覽器會自動預先選取其預設匯總。 在基本案例中，預設值是合理的，但您可以使用不同的匯總來深入瞭解度量。 若要在圖表上查看不同的匯總，您必須瞭解計量瀏覽器如何處理它們。 

計量是在一段時間內， (或「度量值」 ) 的度量系列。 當您繪製圖表時，所選度量的值會在 *時間細微性* 上分開匯總。 您可以 [使用計量瀏覽器時間選擇器面板](metrics-getting-started.md#select-a-time-range)來選取時間細微性的大小。 如果您未明確選取時間範圍，則會根據目前選取的時間範圍自動選取時間細微性。 一旦決定時間細微性之後，在每個時間細微性間隔期間所捕獲的計量值會匯總並放在圖表上，每一次的資料細微性會有一個資料點。

例如，假設圖表顯示的是在 **過去24小時** 的時間範圍內使用 **平均** 匯總的 **伺服器回應時間** 度量：

- 如果時間細微性設定為30分鐘，則會從48匯總資料點中繪製圖表 (例如折線圖會連接圖表繪圖區域中的48點) 。 也就是說，每小時24小時 x 2 資料點。 每個點都代表每個相關30分鐘期間內發生之伺服器要求的所有已捕獲回應時間的 *平均值* 。
- 如果您將時間細微性切換至15分鐘，您會得到96匯總資料點。  也就是說，每小時24小時 x 4 資料點。

計量瀏覽器中有五種可用的基本統計資料匯總類型： **Sum**、 **Count**、 **Min**、 **Max** 和 **Average**。 **Sum** 匯總有時也稱為 **總計匯總**。 針對許多計量，計量瀏覽器會隱藏完全不相關的匯總，而且無法使用。

- **Sum** –在匯總間隔中捕捉的所有值的總和
- **Count** –匯總間隔所捕捉的度量數目。 請注意，[ **計數** ] 會等於 [ **總和** ]，在此情況下，一律會以1的值來捕捉度量。 當計量追蹤相異事件的計數，且每個度量都代表一個事件 (亦即，每當新的要求進入時，程式碼就會引發計量記錄，這是很常見的情況) 
- **平均** –透過匯總間隔所捕捉的度量值平均值
- **最** 小值–透過匯總間隔所捕捉的最小值
- **Max** -透過匯總間隔所捕獲的最大值

## <a name="apply-filters-to-charts"></a>將篩選條件套用至圖表

您可以將篩選器套用到以多個維度顯示計量的圖表。 例如，若「交易計數」計量有「回應類型」維度 (指出來自交易的回應成功或失敗)，則在此維度上篩選將只為成功 (或失敗) 的交易繪製圖表線條。 

### <a name="to-add-a-filter"></a>加入篩選條件

1. 選取圖表上方的 [新增篩選器]

2. 選取您要篩選的維度 (屬性)

   ![顯示您可以篩選)  (屬性維度的螢幕擷取畫面。](./media/metrics-charts/028.png)

3. 選取當繪製圖表時要包括的維度值 (此範例會顯示篩選出成功的交易)：

   ![顯示從成功的儲存體交易中篩選的螢幕擷取畫面。](./media/metrics-charts/029.png)

4. 選取篩選器值之後，請按一下 [篩選器選取器] 以外的位置以將它關閉。 現在圖表會顯示失敗的儲存體交易數目：

   ![顯示失敗的儲存體交易數目的螢幕擷取畫面](./media/metrics-charts/030.png)

5. 您可以重複步驟 1-4 以將多個篩選器套用到相同的圖表。



## <a name="apply-splitting-to-a-chart"></a>將分割套用至圖表

您可以依維度來分割計量，以視覺化方式顯示維度的各區段與彼此之間的差異，並識別維度中與其他區段差異較大的區段。

### <a name="apply-splitting"></a>套用分割

1. 按一下圖表上方的 [套用分割]。
 
   > [!NOTE]
   > 分割不能與具有多個計量的圖表一起使用。 此外，您可以有多個篩選器，但只能有一個分割維度套用至任何單一圖表。

2. 選擇要據以將圖表分割為不同區段的維度：

   ![螢幕擷取畫面：顯示您分割圖表的選定維度。](./media/metrics-charts/031.png)

   現在圖表會顯示多行，每個維度區段一行：

   ![顯示多行的螢幕擷取畫面，每個維度區段各行一個。](./media/metrics-charts/032.png)

3. 按一下 [分組選取器] 以外的位置以將它關閉。

   > [!NOTE]
   > 在相同維度上同時使用篩選與分割，以隱藏與您的案例不相關的區段，讓圖表更容易閱讀。

## <a name="lock-boundaries-of-chart-y-axis"></a>鎖定圖表 y 軸的界限

圖表顯示的較大值的小波動時，鎖定 y 軸的範圍相當重要。 

例如，成功要求的數量從 99.99% 下降到 99.5% 時，可能代表服務的品質大幅降低。 不過，或許很難甚至無法從預設圖表設定注意到數值的小波動。 在此情況下，您可以將圖表的最低的界限鎖定為 99%，使得這種小幅度下降變得更明顯。 

另一個範例是可用記憶體的波動，在技術上，值永遠不會變成 0。 將範圍修正為較高的值可以更明顯發現可用記憶體減少。 

若要控制 y 軸範圍，請使用 [...] [圖表] 功能表，並選取 [ **圖表設定** ] 以存取 [advanced chart] 設定。

![醒目顯示 [圖表設定] 選項的螢幕擷取畫面。](./media/metrics-charts/033.png)

 修改 [y 軸範圍] 區段中的值，或使用 **自動** 按鈕還原為預設值。
 
 ![反白顯示 [Y 軸範圍] 區段的螢幕擷取畫面。](./media/metrics-charts/034.png)

> [!WARNING]
> 鎖定圖表的 y 軸界限可追蹤一段時間的各種計算或加總，因此 (使用計數、加總、最小或最大彙總) 通常需要指定固定時間細微性，而不依賴自動預設值。 因為使用者調整瀏覽器視窗的大小，或從一個螢幕解析度變換為另一個螢幕解析度時，時間細微性經過修改，會導致圖表上的值變更，因此這有其必要性。 時間細微性中產生的變更會影響圖表的外觀，導致目前選取的 y 軸範圍無效。

## <a name="change-colors-of-chart-lines"></a>變更圖表線條的色彩

設定圖表之後，會自動從預設調色板將色彩指派給圖表線條。 您可以變更這些色彩。

若要變更圖表線的色彩，請在對應至圖表的圖例中，按一下彩色的橫條。 [色彩選擇器] 對話方塊隨即開啟。 使用色彩選擇器來設定線條的色彩。

![顯示如何變更色彩的螢幕擷取畫面](./media/metrics-charts/035.png)

設定圖表色彩之後，當您將圖表釘選到儀表板時，它們會維持不變。 下一節將說明如何釘選圖表。

## <a name="pin-charts-to-dashboards"></a>將圖表釘選到儀表板

設定圖表之後，您可以將它加入到儀表板，以便您可以在其他監視遙測情況下重新檢視它，或與您的小組共用。

將已設定的圖表釘選到儀表板：

設定圖表之後，請在圖表的右上角按一下 [ **釘選到儀表板** ]。

![顯示如何釘選到圖表的螢幕擷取畫面](./media/metrics-charts/036.png)

## <a name="create-alert-rules"></a>建立警示規則

您可以使用已設定的準則來將計量視覺化，以作為計量型警示規則的基礎。 新的警示規則將包含來自您圖表的目標資源、計量、分割及篩選維度。 您稍後將能在警示規則建立窗格上修改這些設定。

### <a name="to-create-a-new-alert-rule-click-new-alert-rule"></a>若要建立新的警示規則，請按一下 [新增警示規則]

![以紅色強調顯示的[新增警示規則] 按鈕](./media/metrics-charts/042.png)

您將會進入警示規則建立窗格，其中已預先填入來自圖表的基礎計量維度，讓您能夠更輕鬆地產生自訂警示規則。

![建立警示規則](./media/metrics-charts/041.png)

若要深入了解如何設定計量警示，請查看這篇[文章](alerts-metric.md)。

## <a name="troubleshooting"></a>疑難排解

*我看不到我的圖表上的任何資料。*

* 篩選會套用至窗格上的所有圖表。 請確定，當您將焦點放在某個圖表時，您未在其他圖表上設定會排除所有資料的篩選。

* 如果您想要在不同的圖表上設定不同的篩選，請在不同的刀鋒視窗中建立圖表，將它們儲存為個別的最愛圖表。 如果想要，您可以將這些圖表釘選到儀表板，以便並排查看兩者。

* 如果您依據計量上未定義的屬性區分圖表，則圖表上不會有任何資料。 請嘗試清除分割 (分割)，或選擇不同的屬性。

## <a name="next-steps"></a>後續步驟

  閱讀[建立自訂 KPI 儀表板](../learn/tutorial-app-dashboards.md)以了解使用計量建立可採取動作之儀表板的最佳做法。
