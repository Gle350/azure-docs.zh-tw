---
title: 評估及改善自訂語音精確度-語音服務
titleSuffix: Azure Cognitive Services
description: 在本檔中，您將瞭解如何從數量測量及改善語音轉換文字模型或自訂模型的品質。 必須提供音訊 + 人工標記的轉譯資料，才能測試精確度，並應提供30分鐘到5小時的代表性音訊。
services: cognitive-services
author: trevorbye
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 11/11/2020
ms.author: trbye
ms.openlocfilehash: 54a54dccd82e4f6cfd72a1cc8a71b51f9fd4ed95
ms.sourcegitcommit: 697638c20ceaf51ec4ebd8f929c719c1e630f06f
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/04/2021
ms.locfileid: "97857353"
---
# <a name="evaluate-and-improve-custom-speech-accuracy"></a>評估和改善自訂語音精確度

在本文中，您將瞭解如何從數量測量及改善 Microsoft 語音轉換文字模型或您自己的自訂模型的精確度。 必須提供音訊 + 人工標記的轉譯資料，才能測試精確度，並應提供30分鐘到5小時的代表性音訊。

## <a name="evaluate-custom-speech-accuracy"></a>評估自訂語音精確度

測量模型精確度的產業標準是 (WER) 的 [文字](https://en.wikipedia.org/wiki/Word_error_rate) 錯誤率。 WER 會計算辨識期間所識別的錯誤單字數目，然後除以人為標記的文字記錄中提供的單字總數， (如下所示為 N) 。 最後，該數位會乘以100% 來計算 WER。

![WER 公式](./media/custom-speech/custom-speech-wer-formula.png)

錯誤識別的單字分為三種類別：

* 插入 (I) ：在假設文字記錄中未正確新增的單字
* 刪除 (D) ：在假設文字記錄中未偵測到的字詞
* 替代 (S) ：在參考和假設之間替代的單字

以下為範例：

![錯誤識別的單字範例](./media/custom-speech/custom-speech-dis-words.png)

如果您想要在本機複寫 WER 量值，可以使用 [SCTK](https://github.com/usnistgov/SCTK)中的 sclite。

## <a name="resolve-errors-and-improve-wer"></a>解決錯誤並改善 WER

您可以使用機器辨識結果中的 WER，來評估您的應用程式、工具或產品所使用的模型品質。 5%-10% 的 WER 被視為良好的品質，並已可供使用。 有20% 的 WER 是可接受的，不過您可能會想要考慮其他訓練。 30% 的 WER 或更多信號品質不佳，且需要自訂和定型。

錯誤的散發方式很重要。 遇到許多刪除錯誤時，通常是因為弱式音訊信號強度。 若要解決此問題，您必須收集接近來源的音訊資料。 插入錯誤表示音訊已記錄在雜訊的環境中，且 crosstalk 可能存在，而導致辨識問題。 當定義域特定詞彙的範例已提供為人為標記的轉譯或相關文字時，通常會發生替代錯誤。

藉由分析個別檔案，您可以判斷有何種類型的錯誤，以及特定檔案的哪些錯誤是唯一的。 瞭解檔案層級的問題可協助您以增強目標為目標。

## <a name="create-a-test"></a>建立測試

如果您想要測試 Microsoft 語音轉換文字基準模型的品質，或您已定型的自訂模型，您可以將兩個模型並排地進行比較，以評估精確度。 比較包括 WER 和辨識結果。 一般而言，自訂模型會與 Microsoft 的基準模型進行比較。

若要並行評估模型：

1. 登入 [自訂語音入口網站](https://speech.microsoft.com/customspeech)。
2. 流覽至 **語音轉換文字 > 自訂語音 > [專案名稱] > 測試**。
3. 按一下 [ **加入測試**]。
4. 選取 [ **評估精確度**]。 提供測試的名稱、描述，然後選取您的音訊 + 人類標示的轉譯資料集。
5. 選取最多兩個您想要測試的模型。
6. 按一下頁面底部的 [新增]  。

成功建立您的測試之後，您可以並排比較結果。

### <a name="side-by-side-comparison"></a>並列比較

測試完成後，狀態變更為 [ *成功*] 時，您會發現測試中包含這兩個模型的 WER 數目。 按一下測試名稱以查看 [測試詳細資料] 頁面。 此詳細資料頁面會列出您資料集中的所有語句，表示兩個模型的辨識結果與所提交資料集的轉譯。 若要協助檢查並存比較，您可以切換各種錯誤類型，包括插入、刪除和替代。 藉由接聽音訊並比較每個資料行中的辨識結果，其中會顯示人為標記的轉譯，以及兩個語音轉換文字模型的結果，您可以決定哪一個模型符合您的需求，以及需要額外的訓練和改進。

## <a name="improve-custom-speech-accuracy"></a>改善自訂語音精確度

語音辨識案例依音訊品質和語言 (詞彙和說話樣式) 而有所不同。 下表將探討四個常見的案例：

| 狀況 | 音訊品質 | 詞彙 | 說話樣式 |
|----------|---------------|------------|----------------|
| 話務中心 | 低、8 kHz 可能是1個音訊頻道上的2人，可以壓縮 | 窄，網域和產品的獨特 | 對話式、鬆散結構化 |
| 語音助理 (例如 Cortana 或磁片磁碟機到視窗)  | High、16 kHz | 大量實體 (歌曲標題、產品、位置)  | 清楚陳述的單字和片語 |
| 聽寫 (立即訊息、附注、搜尋)  | High、16 kHz | 不同 | 注意-採取 |
| 影片隱藏式輔助字幕 | 不同，包括各種不同的麥克風使用、新增的音樂 | 各式各樣、來自會議、recited 語音、音樂歌詞 | 讀取、準備或鬆散結構化 |

不同的案例會產生不同的品質結果。 下表將檢查這四個案例中的內容如何以 [文字錯誤率 (WER) ](how-to-custom-speech-evaluate-data.md)的速率。 下表顯示每個案例中最常見的錯誤類型。

| 狀況 | 語音辨識品質 | 插入錯誤 | 刪除錯誤 | 替代錯誤 |
|----------|----------------------------|------------------|-----------------|---------------------|
| 話務中心 | 中型 ( # A0 30% WER)  | 低，但其他人在背景中交談 | 可能很高。 來電中心可能會有雜訊，而重迭的喇叭可能會使模型混淆 | 中。 產品和人員的名稱可能會導致這些錯誤 |
| 語音助理 | 高 (可以 < 10% WER)  | 低度 | 低度 | 中，因為歌曲標題、產品名稱或位置 |
| 聽寫 | 高 (可以 < 10% WER)  | 低度 | 低度 | 高 |
| 影片隱藏式輔助字幕 | 取決於影片類型 (可以 < 50% WER)  | 低 | 可能很高，因為音樂、雜訊、麥克風品質 | 術語可能會導致這些錯誤 |

判斷 WER 的元件 (插入、刪除和替代錯誤的數目) 有助於判斷要加入何種資料來改善模型。 使用 [自訂語音入口網站](https://speech.microsoft.com/customspeech) 來查看基準模型的品質。 入口網站會報告在 WER 品質比率中結合的插入、替代與刪除錯誤率。

## <a name="improve-model-recognition"></a>改善模型辨識

您可以在 [自訂語音入口網站](https://speech.microsoft.com/customspeech)中新增訓練資料，以減少辨識錯誤。 

定期新增來源教材，以規劃維護您的自訂模型。 您的自訂模型需要額外的訓練，以隨時留意您對實體所做的變更。 例如，您可能需要更新產品名稱、歌曲名稱或新的服務位置。

下列各節說明每種額外的定型資料如何可以減少錯誤。

### <a name="add-related-text-sentences"></a>新增相關的文字句子

當您將新的自訂模型定型時，請先加入相關的文字，以改善定義域特定單字和片語的辨識。 相關的文字句子主要可以藉由在內容中顯示，來減少與通用單字和網域特定單字 misrecognition 相關的替代錯誤。 特定領域的單字可能不尋常或組成單字，但其發音必須很容易辨識。

> [!NOTE]
> 避免包含雜訊的相關文字句子，例如無法辨識的字元或文字。

### <a name="add-audio-with-human-labeled-transcripts"></a>使用人為標記的文字記錄來新增音訊

如果音訊來自目標使用案例，則具有人為標記的文字記錄可提供最大的精確度改進。 範例必須涵蓋語音的完整範圍。 例如，零售商店的撥置中心會在夏天的幾個月內取得 swimwear 和太陽眼鏡的大部分呼叫。 確保您的範例包含您想要偵測的完整語音範圍。

請考慮下列詳細資料：

* 自訂語音只能捕捉單字內容，以減少替代錯誤，而不是插入或刪除錯誤。
* 避免包含轉譯錯誤的範例，但包含各種音效品質。
* 請避免與您問題網域無關的句子。 不相關的句子可能會危害您的模型。
* 當文字記錄品質有所差異時，您可以複製非常好的句子 (像是包含關鍵字組的絕佳轉譯，) 來提高其權數。
* 語音服務會自動使用文字記錄來改善定義域特定單字和片語的辨識，如同將它們新增為相關文字一樣。
* 如果音訊也難以理解，則使用音訊定型將會帶來最大的好處。 在大部分的情況下，您應該只使用相關的文字來開始定型。
* 定型作業可能需要數天的時間才能完成。 若要改善定型速度，請務必在 [具有專用硬體的區域](custom-speech-overview.md#set-up-your-azure-account) 中建立您的語音服務訂用帳戶來進行訓練。

> [!NOTE]
> 並非所有的基底模型都支援使用音訊定型。 如果基底模型不支援它，語音服務將只會使用文字記錄中的文字並忽略音訊。

### <a name="add-new-words-with-pronunciation"></a>使用發音新增單字

組成或高度特製化的單字可能會有唯一的發音。 如果單字可以分為較小的字組來發音，可以辨識這些字。 例如，若要辨識 **Xbox**，請以發音為 **X** 方塊。 這種方法不會提高整體精確度，但可以增加這些關鍵字的辨識。

> [!NOTE]
> 這項技術目前僅適用于某些語言。 如需詳細資訊，請參閱 [語音轉換文字表格](language-support.md) 中的發音自訂。

## <a name="sources-by-scenario"></a>依案例的來源

下表顯示語音辨識案例，並列出上述三個訓練內容類別別內所要考慮的來源材質。

| 狀況 | 相關的文字句子 | 音訊 + 人類標記的文字記錄 | 具有發音的新單字 |
|----------|------------------------|------------------------------|------------------------------|
| 話務中心             | 與電話語音中心活動相關的行銷檔、網站、產品評論 | 由人類轉譯的電話語音中心呼叫 | 具有不明確發音的字詞 (查看上述 Xbox)  |
| 語音助理         | 使用命令和實體的所有組合來列出句子 | 將語音說話的命令記錄到裝置，並轉譯為文字 | 為具有唯一發音的 (電影、歌曲、產品) 命名 |
| 聽寫               | 寫入的輸入，例如立即訊息或電子郵件 | 類似于上面 | 類似于上面 |
| 影片隱藏式輔助字幕 | 電視節目腳本、電影、行銷內容、影片摘要 | 影片的確切文字記錄 | 類似于上面 |

## <a name="next-steps"></a>後續步驟

* [定型和部署模型](how-to-custom-speech-train-model.md)

## <a name="additional-resources"></a>其他資源

* [準備及測試您的資料](./how-to-custom-speech-test-and-train.md)
* [檢查您的資料](how-to-custom-speech-inspect-data.md)