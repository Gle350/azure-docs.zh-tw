---
title: 錨點關聯性和尋路
description: 瞭解錨點關聯性背後的概念模型。 瞭解如何連接空間內的錨點，並使用附近的 API 來滿足尋找方法的案例。
author: msftradford
manager: MehranAzimi-msft
services: azure-spatial-anchors
ms.author: parkerra
ms.date: 11/20/2020
ms.topic: conceptual
ms.service: azure-spatial-anchors
ms.openlocfilehash: ce79fe88b33659241a226af7bbb7a966ede41abb
ms.sourcegitcommit: b6267bc931ef1a4bd33d67ba76895e14b9d0c661
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/19/2020
ms.locfileid: "97696161"
---
# <a name="anchor-relationships-and-way-finding-in-azure-spatial-anchors"></a>錨點關聯性和方式-在 Azure 空間錨點中尋找

藉由使用錨點關聯性，您可以在空間中建立連接的錨點，然後詢問類似下列的問題：

* 是否有附近的錨點？
* 他們有多遠？

## <a name="examples"></a>範例

在這些情況下，您可以使用連接的錨點：

* 背景工作角色需要完成一項工作，包括造訪產業工廠中的不同位置。 Factory 在每個位置都有空間錨點。 HoloLens 或行動裝置應用程式可協助引導背景工作角色從某個位置到下一個位置。 應用程式會先要求附近的空間錨點，然後將背景工作引導至下一個位置。 應用程式會以視覺化方式顯示下一個位置的一般方向和距離。

* 博物館會在公用顯示器上建立空間錨點。 這些錨點一起形成了一小時的第一小時教學課程。 在公開顯示時，訪客可以在其行動裝置上開啟博物館的混合現實應用程式。 然後，他們將電話攝影機放在空間附近，以查看與其他公用顯示器在導覽上的一般方向和距離。 當使用者逐步進行公開顯示時，應用程式會更新一般方向和距離，以協助引導使用者。

## <a name="set-up-way-finding"></a>設定方式-尋找

使用方向和錨點之間的距離，以提供指引的應用程式是使用 *方式尋找*。 尋找方式與輪流流覽不同。 在輪流導覽中，使用者會以牆、大門和地面之間的方式來引導。 在尋找方法的情況下，使用者會取得目的地一般方向的提示。 但是，對於空間的推斷或知識也有助於使用者流覽結構到目的地。

若要建立一個方法來尋找體驗，請先準備空間來體驗，並開發使用者將與之互動的應用程式。 概念步驟如下：

1. **規劃空間**：決定空間中的哪些位置將會是尋找體驗的一部分。 在我們的案例中，工廠監督員或博物館導覽協調器可能會決定要包含在尋找體驗中的位置。
2. **連接錨點**：流覽所選擇的位置以建立空間錨點。 您可以在終端使用者應用程式的系統管理員模式中，或完全在不同的應用程式中進行此作業。 您會將每個錨點連接或關聯至其他錨點。 服務會維護這些關聯性。
3. **啟動使用者體驗**：使用者執行應用程式以找出錨點，該錨點可以位於任何選擇的位置。 您的整體設計應該決定使用者可進入體驗的位置。
4. **尋找附近的錨點**：在使用者找到錨點之後，應用程式可以要求附近的錨點。 此程式會傳回裝置與這些錨點之間的姿勢。
5. **引導使用者**：應用程式可以對每個錨點使用姿勢，以提供有關使用者一般方向和距離的指引。 例如，應用程式中的相機摘要可能會顯示圖示和箭號來代表每個可能的目的地，如下圖所示。
6. **精簡指導** 方針：當使用者進行時，應用程式可以定期計算裝置與目的地錨點之間的新姿勢。 應用程式會繼續調整指引提示，以協助使用者抵達目的地。

    ![應用程式如何顯示方式的範例-尋找指引](./media/meeting-spot.png)

## <a name="connect-anchors"></a>連接錨點

若要建立方法尋找體驗，您必須先將錨點放在所選的位置。 在本節中，我們將假設應用程式的系統管理員已完成這項工作。

### <a name="connect-anchors-in-a-single-session"></a>在單一會話中連接錨點

連接錨點：

1. 使用 >cloudspatialanchorsession 逐步前往第一個位置，並建立錨點。
2. 逐步前往第二個位置。 基礎 MR/AR 平臺會追蹤移動。
3. 使用相同的 >cloudspatialanchorsession 建立錨點 B。 現在已連接錨點 A 和 B。 空間錨點服務會維護此關聯性。
4. 繼續進行其餘錨點的程式。

### <a name="connect-anchors-in-multiple-sessions"></a>在多個會話中連接錨點

您可以透過多個會話連接空間錨點。 使用這個方法時，您可以一次建立並連接部分錨點，之後再建立並連接更多錨點。

若要在多個會話之間連接錨點：

1. 應用程式會在一個 >cloudspatialanchorsession 中建立一些錨點， (錨點 A 和 B) 。
2. 應用程式會在不同的時間找到其中一個錨點 (例如，使用新的 >cloudspatialanchorsession 錨定) 。
3. 流覽至新的位置。 基礎混合現實或增強式現實平臺會追蹤移動。
4. 使用相同的 >cloudspatialanchorsession 來建立錨點 C。 錨點 A、B 和 C 現在已連接。 空間錨點服務會維護此關聯性。

您可以繼續進行此程式，以取得更多錨定以及一段時間的更多會話。

### <a name="verify-anchor-connections"></a>確認錨點連接

應用程式可以藉由針對附近錨點發出查詢來確認兩個錨點是否已連接，您可以在 `NearAnchorCriteria` 上設定 `CloudSpatialAnchorWatcher` 。 當查詢的結果包含目標錨點時，就會驗證錨點連接。 如果錨點未連線，應用程式可以嘗試再次連接。

以下是錨點可能無法連接的一些原因：

* 基礎混合現實或增強式事實平臺會在連接錨點的過程中遺失追蹤。
* 因為與空間錨點服務通訊時發生網路錯誤，所以無法保存錨點連接。

### <a name="find-sample-code"></a>尋找範例程式碼

若要尋找示範如何連接錨點以及進行附近查詢的範例程式碼，請參閱 [空間錨點範例應用程式](https://github.com/Azure/azure-spatial-anchors-samples)。
